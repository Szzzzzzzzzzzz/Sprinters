!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var t,e,i,n;t=window,(n=t.jQuery||t.Cowboy||(t.Cowboy={})).throttle=i=function(t,i,s,o){var a,d=0;function c(){var n=this,c=+new Date-d,h=arguments;function l(){d=+new Date,s.apply(n,h)}o&&!a&&l(),a&&clearTimeout(a),o===e&&c>t?l():!0!==i&&(a=setTimeout(o?function(){a=e}:l,o===e?t-c:t))}return"boolean"!=typeof i&&(o=s,s=i,i=e),n.guid&&(c.guid=s.guid=s.guid||n.guid++),c},n.debounce=function(t,n,s){return s===e?i(t,n,!1):i(t,s,!1!==n)},function(t,e,i,n){var s="stickyTable",o={copyTableClass:!0,copyEvents:!1,overflowy:!1};function a(e,i){this.element=e,this._defaults=o,this._name=s,this.options=t.extend({},o,i),this._init()}a.prototype._init=function(){var i,n,s,o,a,d,c,h,l,r,f=t(e),p=t(this.element),u=[];t(this.element).is("table")||t.error("Target element must be a table"),t(this.element).hasClass("sticky-enabled")||p.find("thead").length>0&&p.find("th").length>0&&(i=p.find("thead").clone(this.options.copyEvents),n=p.find("thead, tbody").clone(this.options.copyEvents),p.css({margin:0,width:"100%"}).wrap('<div class="sticky-wrap" />'),this.options.overflowy&&p.parent().addClass("overflow-y"),p.attr("class")&&(u=p.attr("class").split(/\s+/)),p.addClass("sticky-enabled"),p.after('<table class="sticky-thead" />'),p.find("tbody th").length>0&&p.find("tbody tr td").length>18&&p.after('<table class="sticky-col" /><table class="sticky-intersect" />'),s=p.siblings(".sticky-thead"),o=p.siblings(".sticky-col"),a=p.siblings(".sticky-intersect"),d=p.parent(".sticky-wrap"),this.options.copyTableClass&&t.each(u,function(t,e){s.addClass(e),o.addClass(e),a.addClass(e)}),s.append(i),o.append(n).find("thead th:gt(0)").remove().end().find("tbody td").remove(),a.html("<thead><tr><th>"+p.find("thead th:first-child").html()+"</th></tr></thead>"),a.find("th").height(p.find("thead th:first-child").height()),h=function(){r();p.height()>d.height()?d.scrollTop()>0?s.add(a).css({opacity:1,top:d.scrollTop()}):s.add(a).css({opacity:0,top:0}):f.scrollTop()>p.offset().top&&f.scrollTop()<p.offset().top+p.outerHeight()-100?s.add(a).css({opacity:1,display:"",top:f.scrollTop()-p.offset().top}):s.add(a).css({opacity:0,display:"none",top:0})},l=function(){d.scrollLeft()>0?o.add(a).css({opacity:1,left:d.scrollLeft()}):o.css({opacity:0}).add(a).css({left:0})},r=function(){var t=0;return p.find("tbody tr:lt(3)").each(function(){t+=p.height()}),t>.25*f.height()&&(t=.25*f.height()),t+=s.height()},(c=function(){p.find("thead th").each(function(e){s.find("th").eq(e).width(t(this).width())}).end().find("tr").each(function(e){o.find("tr").eq(e).height(t(this).height())}),s.width(p.width()),o.find("th").add(a.find("th")).width(p.find("thead th").width())})(),p.parent(".sticky-wrap").scroll(function(){h(),l()}),f.on("load",c).resize(t.debounce(500,function(){c(),h(),l()})).scroll(h),h())},a.prototype.destroy=function(){var e=t(this.element),i=e.siblings(".sticky-thead"),n=e.siblings(".sticky-col"),s=e.siblings(".sticky-intersect");this.options=t.extend({},o),e.hasClass("sticky-enabled")&&(i.remove(),n.remove(),s.remove(),e.unwrap(),e.removeClass("sticky-enabled")),t.removeData(this.element,"plugin_"+this._name)},t.fn[s]=function(e){return this.each(function(){var i=t.data(this,"plugin_"+s);i?("string"==typeof e||e instanceof String)&&(void 0!==i[e]&&t.isFunction(i[e])?-1!==e.indexOf("_")?t.error("Method "+e+" is private!"):i[e](Array.prototype.slice.call(arguments,1)):t.error("Method "+e+" does not exist.")):"object"!=typeof e&&e?t.error("Plugin must be initialised before using method: "+e):t.data(this,"plugin_"+s,new a(this,e))})}}(jQuery,window,document)});
